<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulation Based Calibration for rstan/cmdstanr models • SBC</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Simulation Based Calibration for rstan/cmdstanr models">
<meta property="og:description" content="SBC helps perform Simulation Based Calibration on models using Stan or brms.
  It contains various classes and functions to extract samples from models, calculate SBC metrics and visualize utility plots.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">SBC</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/index.html">Vignettes</a>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/cmdstanr">cmdstanr</a>
    </li>
    <li>
      <a href="http://paul-buerkner.github.io/brms/">brms</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="http://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="http://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="http://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstantools">rstantools</a>
    </li>
    <li>
      <a href="https://mc-stan.org/posterior">posterior</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/hyunjimoon/SBC">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="http://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="simulation-based-calibration-sbc" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#simulation-based-calibration-sbc" class="anchor"></a>Simulation-based Calibration: SBC</h1></div>
<div id="efficient-simulation-based-calibration-for-bayesian-models" class="section level2">
<h2 class="hasAnchor">
<a href="#efficient-simulation-based-calibration-for-bayesian-models" class="anchor"></a>Efficient simulation-based calibration for Bayesian models</h2>
<p>SBC provides tools to easily validate and offer corrections on prior, likelihood, and computation algorithms based on the self-recovering property of Bayesian models. This package contains tools such as SBC rank histograms, ECDF plots, and their summary statistics which can be used to assess computational faithfulness.</p>
<div id="varieties-of-calibrations-scope-of-this-package" class="section level3">
<h3 class="hasAnchor">
<a href="#varieties-of-calibrations-scope-of-this-package" class="anchor"></a>Varieties of calibrations: scope of this package</h3>
<p>Calibration (i.e. reliability) is not a sufficient condition for a good forecast but a minimal property that any forecast should satisfy (FV1998). It serves as a bootstrap for model development and its method and target varies. Target is chosen as modeler’s quantity of interest and directly affects the calibrated result as reward in reinforcement learning. Method depends on how much you marginalized or conditioned the full joint space to test coverage. Scope of this package is checked below.</p>
</div>
</div>
<div id="interface-and-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#interface-and-usage" class="anchor"></a>Interface and Usage</h2>
<p>SBC is designed to be primarily used with <a href="https://mc-stan.org/">Stan</a> models, offering a highly customizable interface to integrate Simulation Based Calibration into existing Bayesian workflows with minimal effort. Its main feature is the <code>api</code> interface, which defines a fully-blown SBC pipeline starting from dataset generation to posterior sampling. Once a user has a valid Stan model and a minor R function defining the data generating process(referred to as <code>Generator</code>), running SBC becomes as simple as:</p>
<pre><code>n_datasets &lt;- 100  # Number of SBC iterations to run

sbc_generator &lt;- SBC::function_SBC_generator(Generator)
sbc_dataset &lt;- SBC::generate_datasets(
  sbc_generator, 
  n_datasets)

cmdstan_backend &lt;- SBC::cmdstan_sample_SBC_backend(
    cmdstan_model, iter_warmup = 1000, iter_sampling = 1000)
    
results &lt;- SBC::compute_results(sbc_dataset, cmdstan_backend)
plot_rank_hist(results)</code></pre>
<p>For detailed usage, please refer to the included vignettes.</p>
<div id="compatibility" class="section level3">
<h3 class="hasAnchor">
<a href="#compatibility" class="anchor"></a>Compatibility</h3>
<p>Currently <code>SBC</code> supports <code>cmdstan</code>, <code>rstan</code>, and <code>brms</code> models out of the box. However, adding Backends for other platforms is supported through the <code>api</code> interface.</p>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To install the development version of SBC, run</p>
<pre><code><a href="https://devtools.r-lib.org//reference/remote-reexports.html">devtools::install_github("hyunjimoon/SBC")</a></code></pre>
<p>from your R console.</p>
<div id="references" class="section level3">
<h3 class="hasAnchor">
<a href="#references" class="anchor"></a>References:</h3>
<p>Theoretical support</p>
<ul>
<li>
<a href="https://arxiv.org/pdf/1804.06788.pdf">Validating Bayesian Inference Algorithms with Simulation-Based Calibration</a> Talts, Betancourt, Simpson, Vehtari, Gelman, 2018</li>
<li>
<a href="https://arxiv.org/abs/2103.10522">Graphical Test for Discrete Uniformity and its Applications in Goodness of Fit Evaluation and Multiple Sample Comparison</a> Säilynoja, Bürkner, Vehtari, 2021</li>
<li>
<a href="https://arxiv.org/abs/2011.01808">Bayesian Workflow</a>, Gelman et al., 2020</li>
<li>
<a href="https://psycnet.apa.org/record/2020-43606-001">Toward a principled Bayesian workflow in cognitive science</a> Schad, Betancourt, Vasishth, 2021</li>
<li>
<a href="https://arxiv.org/pdf/2103.08744.pdf">Bayes factor workflow</a> Schad, Nicenboim, Bürkner, Betancourt, Vasishth, 2021</li>
</ul>
<p>Application support</p>
<ul>
<li><a href="https://link.springer.com/content/pdf/10.3758/s13428-019-01318-x.pdf">Cognitive science, response time fitting</a></li>
<li><a href="https://www.biorxiv.org/content/10.1101/2020.10.27.356758v1.full.pdf">Bioinformatics, effect of mutation prediction</a></li>
<li><a href="https://gmd.copernicus.org/articles/11/4383/2018/gmd-11-4383-2018.pdf">Earth science, earthquake prediction</a></li>
<li><a href="http://proceedings.mlr.press/v89/papamakarios19a/papamakarios19a.pdf">Sequential Neural Likelihood</a></li>
</ul>
<p>Vignette</p>
<ul>
<li>
<a href="https://avehtari.github.io/rhat_ess/rhat_ess.html">ECDF with codes</a> (new implementation by Teemu Säilynoja will be available in <code>bayesplot</code> and <code>SBC</code> package soon)</li>
</ul>
</div>
</div>
<div id="faq" class="section level2">
<h2 class="hasAnchor">
<a href="#faq" class="anchor"></a>FAQ</h2>
<blockquote>
<p>How does calibration relate to prediction accuracy?</p>
</blockquote>
<p>Comparing the ground truth and the simulated result is a backbone of calibration and comparison target greatly affects the calibrated (i.e. trained) result, similar to reward in reinforcement learning. In this sense, if the U(a(y), theta) term is designed for prediction, the model will be calibrated to have best predictive result as possible.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Ask a question at <br><a href="http://discourse.mc-stan.org/">http://​discourse.mc-stan.org/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Shinyoung Kim <br><small class="roles"> Author </small>  </li>
<li>Hyunji Moon <br><small class="roles"> Author, maintainer </small>  </li>
<li>Martin Modrák <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Shinyoung Kim, Hyunji Moon, Martin Modrák.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
